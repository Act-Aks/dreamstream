#!/bin/bash

# Script to verify version consistency between app.json and release
# Usage: ./scripts/verify-version.sh <expected-version>

set -e

EXPECTED_VERSION="$1"

if [ -z "$EXPECTED_VERSION" ]; then
    echo "‚ùå Expected version not provided"
    exit 1
fi

cd apps/dreamstream

APP_VERSION=$(node -e "console.log(require('./app.json').expo.version)")

echo "üì± App version: $APP_VERSION"
echo "üè∑Ô∏è Release version: $EXPECTED_VERSION"

if [ "$APP_VERSION" != "$EXPECTED_VERSION" ]; then
    echo "‚ö†Ô∏è Warning: Version mismatch. Expected: $EXPECTED_VERSION, Got: $APP_VERSION"
    # Don't exit with error, just warn
else
    echo "‚úÖ Version consistency verified"
fi